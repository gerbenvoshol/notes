<!DOCTYPE html><html><head><meta charset='UTF-8'><title>Gentoo</title><link rel=stylesheet href='../css/main.css'><link rel=stylesheet href='../css/note.css'></head><body><header><a href='index.html'><span>index</span></a><h1>Gentoo</h1><nav>Tags:<ul><li><a href='tags/linux.html'>linux</a></li></ul></nav></header><main><h2>Portage</h2><h4>Directories</h4><p>The default ebuild folder is <code>/var/db/repos/gentoo/</code><br>The package.mask file is is at <code>/var/db/repos/gentoo/profiles/package.mask</code><br>Portage stores source files in <code>/var/cache/distfiles/</code><br>The standard directory for documentations is <code>/usr/share/doc/</code><br>Explicitly installed packages are listed in <code>/var/lib/portage/world</code><br>The common configuration file for merging is at <code>/etc/portage/make.conf</code></p><h4>Cheat sheet</h4><table><thead><tr><th>Action</th><th>Command</th></tr></thead><tbody><tr><td>Update the repository</td><td><code>emerge --sync</code></td></tr><tr><td>Search for software</td><td><code>emerge --search [keyword]</code><br><code>emerge --searchdesc [keyword]</code></td></tr><tr><td>Install software</td><td><code>emerge --ask gui-wm/sway</code></td></tr><tr><td>Check dependencies</td><td><code>emerge --pretend sway</code></td></tr><tr><td>Only download sources</td><td><code>emerge --fetchonly sway</code></td></tr><tr><td>View USE flags</td><td><code>emerge -vp gui-wm/sway</code></td></tr><tr><td>Mark package as removable</td><td><code>emerge --deselect sway</code></td></tr><tr><td>Update installed packages</td><td><code>emerge --update --ask @world</code></td></tr><tr><td>+ their dependencies</td><td><code>--deep</code></td></tr><tr><td>+ their build dependencies</td><td><code>--with-bdeps=y</code></td></tr><tr><td>+ account for USE changes</td><td><code>--newuse</code></td></tr><tr><td>Remove deselected/unneeded packages</td><td><code>emerge --depclean --ask</code></td></tr><tr><td>Query a variable</td><td><code>portageq envvar USE</code></td></tr></tbody></table><h4>Updating packages</h4><p>Update the repository with <code>emerge --sync</code>, then <code>emerge --update --ask @world</code></p><h4>Removing unneeded packages</h4><p>Manually deselect the packages to remove with <code>emerge --deselect</code>, or make the desired changes to USE flags<br>Update with dependencies: <code>emerge --update --deep --newuse --ask @world</code><br>Remove unneeded packages: <code>emerge --depclean --ask</code></p><h4>Accepting licenses</h4><p>A package's license will be shown by results of <code>emerge --search</code><br>The <code>ACCEPT_LICENSE</code> variable is defined in <code>/etc/portage/make.conf</code><br>Acceptance of licenses for individual packages can be done in <code>/etc/portage/package.license</code><br>Individual licenses are stored in <code>/var/db/repos/gentoo/licenses/</code><br>License groups are stored in <code>var/db/repos/gentoo/profiles/license_groups</code></p><table><thead><tr><th>License Group</th><th>Summary</th></tr></thead><tbody><tr><td><a href='https://www.gnu.org/licenses/license-list.html' class='external'>@GPL-COMPATIBLE</a></td><td>GPL, BSD, MIT, Apache-2.0, zlib, unicode, ...</td></tr><tr><td>@FSF-APPROVED</td><td>Apache-1.0, openssl, IBM, PHP-3.01, ...</td></tr><tr><td><a href='https://www.opensource.org/licenses' class='external'>@OSI-APPROVED</a></td><td>GPL, BSD, MIT, zlib, ...</td></tr><tr><td>@MISC-FREE</td><td>Unapproved but follow the Free Software Definition</td></tr><tr><td>@FREE-SOFTWARE</td><td>@FSF-APPROVED + @OSI-APPROVED + @MISC-FREE</td></tr><tr><td>@FSF-APPROVED-OTHER</td><td>"free documentation" or "works of practical use besides software and documentation"</td></tr><tr><td>@MISC-FREE-DOCS</td><td>Not listed under @FSF-APPROVED-OTHER but still follow the free definition</td></tr><tr><td>@FREE-DOCUMENTS</td><td>@FSF-APPROVED-OTHER + @MISC-FREE-DOCS</td></tr><tr><td>@FREE</td><td>@FREE-SOFTWARE + @FREE-DOCUMENTS</td></tr><tr><td>@BINARY-REDISTRIBUTABLE</td><td>At the very least allows free redistribution in binary form</td></tr><tr><td>@EULA</td><td>Tries to take away your rights</td></tr></tbody></table><h2>Network</h2><p>The hostname is defined at <code>/etc/conf.d/hostname</code></p><pre class='bash'># hostname
hostname="oldboy"
</pre><p>You can define several fields under <code>/etc/conf.d/net</code></p><pre class='bash'># dns domain name
dns_domain_lo="home"
# ip interface
config_eno1="192.168.1.141 netmask 255.255.255.0 brd 192.168.1.255"
routes_eno1="default via 192.168.1.1"
</pre><h2>Linux</h2><p>Update environment variables for the current session with <code>env-update</code> and <code>source /etc/profile</code></p><p>Find all available modules by running</p><pre class='bash'>find /lib/modules/`uname -r` -type f -iname '*.o' -or -iname '*.ko'
</pre><p>To load modules automatically on boot, list them in <code>/etc/modprobe.d/*.conf</code> files.</p><p>Configure the kernel with <code>make menuconfig</code><br>Build the kernel by doing <code>make install -j5 && make modules_install -j5</code></p></main></body></html>